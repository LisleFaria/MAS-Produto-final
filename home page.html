<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cor Sano - Saudável na universidade</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Open+Sans&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
      body {
          font-family: "Poppins", Arial, sans-serif;
          margin: 0;
          padding: 0;
          background-color: #f9f9f9;
          color: #333;
      }

      header {
          background-color: #4a90e2;
          background: linear-gradient(
            180deg,
            rgb(146, 163, 253) 0%,
            rgb(157, 206, 255) 100%
          );
          color: white;
          padding: 1rem;
          display: flex;
          justify-content: space-between; /* Align content to the right */
          align-items: center; /* Vertically center the content */
          font-size: 1.5rem;
      }

      header img {
          width: 40px; /* Set the image size */
          height: auto;
      }
      header a {
          color: white; /* Makes the icon or link white */
          text-decoration: none; /* Removes underline for links */
      }

      header a:hover {
          color: #f0f0f0; /* Subtle hover effect for better feedback */
      }

      header i {
          font-size: 1.5rem;
          color: inherit;
      }

      nav {
          display: flex;
          justify-content: space-around;
          background-color: #ffffff;
          background: linear-gradient(
            180deg,
            rgb(146, 163, 253) 0%,
            rgb(157, 206, 255) 100%
          );
          padding: 0.5rem 0;
          border-top: 1px solid #ccc;
          box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
          position: sticky;
          bottom: 0;
          width: 100%;
      }

      nav a {
          text-decoration: none;
          color: #ffffff;
          font-size: 1rem;
          display: flex;
          flex-direction: column;
          align-items: center;
      }

      nav a i {
          font-size: 1.5rem;
          margin-bottom: 0.2rem;
      }

      .container {
        padding: 2rem;
        padding-bottom: 5rem;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        margin-top: 3rem; 
      }

      .card {
          background: white;
          padding: 1.5rem;
          margin: 1rem 0;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          height: 50px;
      }

      .button {
          display: inline-block;
          margin-top: 1rem;
          padding: 0.7rem 1rem;
          background-color: #4a90e2;
          background: linear-gradient(
            180deg,
            rgb(146, 163, 253) 0%,
            rgb(157, 206, 255) 100%
          );
          color: white;
          text-decoration: none;
          border-radius: 4px;
          text-align: center;
      }
      #classResults {
          margin-top: 20px;
      }
      .result-item {
          margin: 10px 0;
      }
      #toggleFilters {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 1rem;
      }
      
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.3/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
</head>
<body>
    <header>
      <img src="https://play-lh.googleusercontent.com/Phfn3jufrHtx-mJYPqMqoO54eAJC29cvSelPnJrRXWCNXLOhepIsBnK0tu_MbnHyfo4">
      <a href="login.html"><i class="fa fa-sign-out" aria-hidden="true"></i></a>
    </header>
    <div class="container">
      <!-- Saudações com nome do usuário -->
      <div id="user-greeting" class="mb-3">
          <h1>Olá, <span id="user-name"></span>!</h1>
      </div>
    </div>
    <div class="container">
        <div class="card mb-3" style="max-width: 540px;">
          <div class="row g-0">
            <div class="col-md-4">
              <img src="https://i.pinimg.com/736x/d8/d4/d7/d8d4d70aec56779246ef56292c9b4d07.jpg" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h5 class="card-title">Histórico de aulas</h5>
                <p class="card-text">Veja o quê foi feito nas suas últimas aulas e deixe uma avaliação.</p>
                <a href="historico.html" class="button">Checar</a>
              </div>
            </div>
          </div>
        </div>

        <div class="card mb-3" style="max-width: 540px;">
          <div class="row g-0">
            <div class="col-md-4">
              <img src="https://i.pinimg.com/736x/93/ae/c6/93aec605001d58e38846b49b79ca6834.jpg" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h5 class="card-title">Planos alimentares</h5>
                <p class="card-text">Descubra novas maneiras de se alimentar de forma saudável.</p>
                <a href="planoalimentar.html" class="button">Explore</a>
              </div>
            </div>
          </div>
        </div>
    </div>

    <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header d-flex justify-content-between align-items-center">
            <h5 class="modal-title" id="searchModalLabel">Procurar por aulas</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
            <div class="modal-body">
              <form id="searchForm" class="d-flex align-items-center gap-2">
                  <input 
                      type="text" 
                      id="searchQuery" 
                      class="form-control" 
                      placeholder="Search for a class..." 
                      oninput="filterClasses()"
                  >
                  <button 
                      type="button" 
                      id="toggleFilters" 
                      class="btn btn-outline-secondary"
                      onclick="toggleFilterContainer()"
                  >
                      <i class="fa fa-filter" aria-hidden="true"></i>
                  </button>
              </form>
          
              <div id="filterContainer" style="display: none; margin-top: 10px;">
                <label>Filter by Category:</label><br>

                <label>
                  <input type="checkbox" id="category1" value="Yoga" onchange="filterClasses()">
                  Yoga
                </label><br>
                
                <label>
                  <input type="checkbox" id="category2" value="Crossfit" onchange="filterClasses()">
                  Crossfit
                </label><br>
                
                <label>
                  <input type="checkbox" id="category3" value="Kickboxing" onchange="filterClasses()">
                  Kickboxing
                </label><br>
                
                <label>
                  <input type="checkbox" id="category4" value="Pilates" onchange="filterClasses()">
                  Pilates
                </label><br>                
              </div>
          
              <div id="classResults" class="mt-3">
                  <!-- Resultados filtrados -->
              </div>
          </div>
        </div>
      </div>
    </div>

    <nav class="fixed-bottom">
        <a href="home page.html"><i class="fa fa-home active" aria-hidden="true"></i></a>
        <a href="#"><i class="fa fa-line-chart" aria-hidden="true"></i></a>
        <a href="" data-bs-toggle="modal" data-bs-target="#searchModal"><i class="fa fa-search" aria-hidden="true"></i></a>
        <a href="planoalimentar.html"><i class="fa fa-cutlery" aria-hidden="true"></i></a>
        <a href="profile.html"><i class="fa fa-user-o" aria-hidden="true"></i></a>
    </nav>
    
    <script>
      // Função para verificar se o usuário está logado
      function checkLogin() {
    const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));
    if (loggedInUser) {
        const allUsers = JSON.parse(localStorage.getItem("users"));
        // Se o usuário estiver logado, exibe a saudação com o nome dele
        document.getElementById("user-name").textContent = loggedInUser.name;
        const user = allUsers.find(u => u.email === loggedInUser.email);

        if (user) {
            // Atualiza o 'loggedInUser' com as mesmas características do usuário vinculado
            // Aqui você pode atualizar todos os campos necessários
            Object.assign(loggedInUser, user);
            localStorage.setItem("loggedInUser", JSON.stringify(loggedInUser));
        } else {
            console.error("Usuário vinculado não encontrado.");
        }
    } else {
        // Caso contrário, redireciona para a página de login
        alert("Você precisa estar logado!");
        window.location.href = "login.html";
    }
  }

  // Verifica se o usuário está logado ao carregar a página
  document.addEventListener('DOMContentLoaded', checkLogin);

  // Função de logout
  function logout() {
    localStorage.removeItem("loggedInUser");
    window.location.href = "login.html"; // Redireciona para a página de login
  }
      // Função para verificar o papel do usuário e ajustar o conteúdo
      function adjustContentForRole() {
          const user = JSON.parse(localStorage.getItem("loggedInUser"));
          
          if (user && user.isInstructor === true) {
              // Ocultar outras seções
              const allCards = document.querySelectorAll(".card");
              
              // Itera sobre todos os cards e oculta os que não são "Histórico de aulas"
              allCards.forEach(card => {
                  const title = card.querySelector(".card-title").textContent.trim();
                  if (title !== "Histórico de aulas") {
                      card.style.display = "none"; // Esconde os cards que não correspondem
                  }
              });
          }
      }

// Chama as funções ao carregar a página
document.addEventListener("DOMContentLoaded", () => {
    checkLogin(); // Garante que o usuário esteja logado
    adjustContentForRole(); // Ajusta o conteúdo com base no papel
});


      // Chama a função de verificação ao carregar a página
      document.addEventListener("DOMContentLoaded", checkLogin);
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.3/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.1/knockout-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
    <script src="search.js"></script>
</body>
</html>
