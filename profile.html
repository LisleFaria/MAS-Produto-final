<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil do Usuário</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Open+Sans&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
        body {
            font-family: "Poppins", Arial, sans-serif;
            background-color: #f9f9f9;
            padding: 0;
        }

        header {
          background-color: #4a90e2;
          background: linear-gradient(
            180deg,
            rgb(146, 163, 253) 0%,
            rgb(157, 206, 255) 100%
          );
          color: white;
          padding: 1rem;
          display: flex;
          justify-content: space-between; /* Align content to the right */
          align-items: center; /* Vertically center the content */
          font-size: 1.5rem;
        }

        header img {
            width: 40px; /* Set the image size */
            height: auto;
        }
        header a {
            color: white; /* Makes the icon or link white */
            text-decoration: none; /* Removes underline for links */
        }

        header a:hover {
            color: #f0f0f0; /* Subtle hover effect for better feedback */
        }

        header i {
            font-size: 1.5rem;
            color: inherit;
        }

        .container {
            padding: 2rem;
        }

        nav {
          display: flex;
          justify-content: space-around;
          background-color: #ffffff;
          background: linear-gradient(
            180deg,
            rgb(146, 163, 253) 0%,
            rgb(157, 206, 255) 100%
          );
          padding: 0.5rem 0;
          border-top: 1px solid #ccc;
          box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
          position: sticky;
          bottom: 0;
          width: 100%;
      }

      nav a {
          text-decoration: none;
          color: #ffffff;
          font-size: 1rem;
          display: flex;
          flex-direction: column;
          align-items: center;
      }

      nav a i {
          font-size: 1.5rem;
          margin-bottom: 0.2rem;
      }


    .form-control {
        margin-bottom: 1rem;
    }

    .profileForm .btn-primary {
        display: inline-block;
        margin-top: 1rem;
        padding: 0.7rem 1rem;
        background-color: #4a90e2;
        background: linear-gradient(
            180deg,
            rgb(146, 163, 253) 0%,
            rgb(157, 206, 255) 100%
        );
        color: white;
        text-decoration: none;
        border-radius: 4px;
        text-align: center;
        outline: none;
        border: none;
    }

    .btn{
        background-color: #4a90e2;
        background: linear-gradient(
            180deg,
            rgb(146, 163, 253) 0%,
            rgb(157, 206, 255) 100%
        );
        color: white;
    }

    .profileForm .btn-primary:focus {
        box-shadow: 0 0 5px rgba(74, 144, 226, 0.5);
    }

    .modal .btn-outline-secondary {
        background: none;
        border: 1px solid #6c757d;
        color: #6c757d;
        padding: 0.375rem 0.75rem; 
        border-radius: 0.25rem; 
        text-align: center;
    }

    .modal .btn-outline-secondary:hover {
        color: #fff;
        background-color: #6c757d;
        border-color: #6c757d;
    }
    </style>
</head>
<body>
    <header>
        <img src="https://play-lh.googleusercontent.com/Phfn3jufrHtx-mJYPqMqoO54eAJC29cvSelPnJrRXWCNXLOhepIsBnK0tu_MbnHyfo4">
        <span>Perfil</span>
        <a href="login.html"><i class="fa fa-sign-out" aria-hidden="true"></i></a>
    </header>

    <div class="container">
        <form class="profileForm">
            <div class="mb-3">
                <label for="nome" class="form-label">Nome</label>
                <input type="text" class="form-control" id="nome">
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email">
            </div>
            <div class="mb-3">
                <label for="senha" class="form-label">Senha</label>
                <input type="password" class="form-control" id="senha" placeholder="Digite sua nova senha">
            </div>
            <div class="mb-3" id="pesoo">
                <label for="peso" class="form-label">Peso (kg)</label>
                <input type="number" class="form-control" id="peso">
            </div>
            <div class="mb-3" id="alturaa">
                <label for="altura" class="form-label">Altura (cm)</label>
                <input type="number" class="form-control" id="altura">
            </div>
            <button type="submit" class="btn btn-primary">Salvar Alterações</button>
        </form>
        <br />
        <button class="btn" onclick="window.location.href='help.html';">
            <span >Get Help</span>
        </button>
    </div>

    <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header d-flex justify-content-between align-items-center">
              <h5 class="modal-title" id="searchModalLabel">Procurar por aulas</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
              <div class="modal-body">
                <form id="searchForm" class="d-flex align-items-center gap-2">
                    <input 
                        type="text" 
                        id="searchQuery" 
                        class="form-control" 
                        placeholder="Search for a class..." 
                        oninput="filterClasses()"
                    >
                    <button 
                        type="button" 
                        id="toggleFilters" 
                        class="btn btn-outline-secondary"
                        onclick="toggleFilterContainer()"
                    >
                        <i class="fa fa-filter" aria-hidden="true"></i>
                    </button>
                </form>
            
                <div class="specialties-container" id="specialtiesContainer">
                    <div class="mb-3">
                        <label for="specialties" class="form-label">Especialidades (aulas que dá)</label><br />
                        <label><input type="checkbox" id="yoga" value="Yoga"> Yoga</label><br />
                        <label><input type="checkbox" id="crossfit" value="Crossfit"> Crossfit</label><br />
                        <label><input type="checkbox" id="kickboxing" value="Kickboxing"> Kickboxing</label><br />
                        <label><input type="checkbox" id="pilates" value="Pilates"> Pilates</label><br />
                    </div>
                </div>
            
                <div id="classResults" class="mt-3">
                    <!-- Resultados filtrados -->
                </div>
                
            </div>
            
          </div>
          
        </div>
      </div>
      
    
    



    <nav class="fixed-bottom">
        <a href="home page.html"><i class="fa fa-home" aria-hidden="true"></i></a>
        <a href="#"><i class="fa fa-line-chart" aria-hidden="true"></i></a>
        <a href="#" data-bs-toggle="modal" data-bs-target="#searchModal"><i class="fa fa-search" aria-hidden="true"></i></a>
        <a href="planoalimentar.html"><i class="fa fa-cutlery" aria-hidden="true"></i></a>
        <a href="profile.html"><i class="fa fa-user-o" aria-hidden="true"></i></a>
    </nav>

    <script src="search.js"></script>
    <script>
        // Função para carregar os dados do localStorage e preencher os campos do formulário
        function loadProfile() {
    const userData = JSON.parse(localStorage.getItem('loggedInUser'));
    if (userData) {
        document.getElementById('nome').value = userData.name;
        document.getElementById('email').value = userData.email;
        document.getElementById('peso').value = userData.weight;
        document.getElementById('altura').value = userData.height;

        // Verificar se o usuário é um instrutor e exibir campos de especialidades e senha
        if (userData.isInstructor === true) {
            document.getElementById('specialtiesContainer').style.display = 'block'; // Exibe as especialidades
            // Preencher os checkboxes com as especialidades selecionadas
            document.getElementById('pesoo').style.display = 'none';
            document.getElementById('alturaa').style.display = 'none';
        } else {
            document.getElementById('specialtiesContainer').style.display = 'none'; // Ocultar especialidades
        }
    } else {
        alert('Nenhum usuário encontrado no perfil.');
        window.location.href = 'login.html'; // Redireciona para login caso não haja dados no localStorage
    }
}
    

        // Função para salvar as alterações no localStorage
        document.querySelector('.profileForm').addEventListener('submit', function (e) {
    e.preventDefault();

    // Recupera o usuário do localStorage
    const userData = JSON.parse(localStorage.getItem('loggedInUser'));

    // Cria um objeto para armazenar as alterações
    let updatedUser
    if (userData.isInstructor === true){
        updatedUser = {
        ...userData, // Mantém os dados antigos
        name: document.getElementById('nome').value, // Atualiza nome
        email: document.getElementById('email').value, // Atualiza email
    };
}
    else {
        updatedUser = {
        ...userData, // Mantém os dados antigos
        name: document.getElementById('nome').value, // Atualiza nome
        email: document.getElementById('email').value, // Atualiza email
        weight: document.getElementById('peso').value, // Atualiza peso
        height: document.getElementById('altura').value // Atualiza altura
    };
    }

    // Verifica se o campo de senha não está vazio antes de atualizar a senha
    const newPassword = document.getElementById('senha').value;
    if (newPassword) {
        updatedUser.password = newPassword; // Atualiza a senha
    }

    // Armazena o objeto atualizado no localStorage
    localStorage.setItem('loggedInUser', JSON.stringify(updatedUser));

    alert('Alterações salvas com sucesso!');
});


        // Carregar os dados do perfil quando a página for carregada
        window.onload = loadProfile;
    </script>
   

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js"></script>
</body>
</html>